<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regular Proxy - CloudProxy</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif;}
    body {background: var(--bg-color); color: var(--text-color); transition: 0.3s ease; min-height: 100vh; display: flex; flex-direction: column;}
    
    :root {
      --bg-color: #0f172a;
      --card-color: #1e293b;
      --text-color: #ffffff;
      --primary: #facc15;
    }
    .light-theme {
      --bg-color: #f8fafc;
      --card-color: #e2e8f0;
      --text-color: #0f172a;
      --primary: #d97706;
    }

    header {display: flex; justify-content: flex-start; padding: 1rem 2rem;}
    .back-btn {
      background: var(--primary); color: #0f172a; padding: 0.6rem 1.2rem; border: none; border-radius: 0.6rem;
      cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 0.4rem; transition: 0.3s;
    }
    .back-btn:hover {opacity: 0.85; transform: translateX(-4px);}

    .container {max-width: 400px; width: 100%; background: var(--card-color); padding: 2rem; border-radius: 1rem; 
      box-shadow: 0 10px 25px rgba(0,0,0,0.3); text-align: center; margin: auto;}
    h2 {margin-bottom: 1rem; color: var(--primary);}
    input[type="text"] {
      width: 100%; padding: 0.8rem; border: none; border-radius: 0.5rem; margin: 0.8rem 0;
      background: #334155; color: #fff; transition: 0.3s;
    }
    .light-theme input[type="text"] {background: #cbd5e1; color: #0f172a;}
    input[readonly] {background: #111827; color: var(--primary); font-weight: bold; text-align: center;}
    button {
      width: 100%; padding: 0.8rem; margin-top: 0.6rem; border: none;
      border-radius: 0.5rem; background: var(--primary); color: #0f172a;
      font-weight: bold; cursor: pointer; transition: 0.3s;
    }
    button:hover {opacity: 0.9; transform: translateY(-2px);}

    /* Popup */
    .popup {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center;
      z-index: 1000;
    }
    .popup-content {
      background: var(--card-color); padding: 2rem; border-radius: 1rem; text-align: center;
      max-width: 350px; color: var(--text-color); transition: 0.3s;
    }
    .popup-content h3 {margin-bottom: 1rem; color: var(--primary);}

    /* Floating Telegram */
    .telegram-float {
      position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px;
      background: #0088cc; border-radius: 50%; display: flex; align-items: center; justify-content: center;
      color: #fff; font-size: 1.8rem; box-shadow: 0 10px 25px rgba(0,0,0,0.4); cursor: grab; z-index: 999;
      transition: transform 0.3s;
    }
    .telegram-float:active { cursor: grabbing; transform: scale(1.1); }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <button class="back-btn" onclick="window.location.href='dashboard.html'">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </button>
  </header>

  <!-- Popup -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <h3>Here are some free proxys for team members</h3>
      <p>Enter your secret code to get your free proxy</p>
      <button id="popupOkBtn">Okay</button>
    </div>
  </div>

  <!-- Main Container -->
  <div class="container">
    <h2>My Proxy</h2>
    <input type="text" id="secretCode" placeholder="Enter Secret Code">
    <button onclick="getProxy()">Get Proxy</button>
    <input type="text" id="proxyBox" placeholder="Your Proxy will appear here" readonly>
    <button id="clearBtn" style="display:none;" onclick="clearProxy()">Clear</button>
  </div>

  <!-- Floating Telegram -->
  <div class="telegram-float" id="telegramBtn">
    <i class="fab fa-telegram-plane"></i>
  </div>

  <script>
    const popup = document.getElementById("popup");
    const popupOkBtn = document.getElementById("popupOkBtn");
    const proxyBox = document.getElementById("proxyBox");
    const clearBtn = document.getElementById("clearBtn");
    const telegramBtn = document.getElementById("telegramBtn");

    // Close popup
    popupOkBtn.addEventListener("click", () => popup.style.display = "none");

    // Theme sync from dashboard
    if (localStorage.getItem("theme") === "light") {
      document.body.classList.add("light-theme");
    }

    // Load proxy from localStorage
    const savedProxy = localStorage.getItem("myProxy");
    if (savedProxy) {
      proxyBox.value = savedProxy;
      clearBtn.style.display = "block";
    }

    // Mock proxy codes
    const proxyData = {
      "TEAM123": "192.168.0.1:8080",
      "VIP456": "10.10.10.10:3128",
      "CLOUD999": "45.77.89.23:1080"
    };

    // Get proxy
    function getProxy() {
      const code = document.getElementById("secretCode").value.trim();
      if (proxyData[code]) {
        proxyBox.value = proxyData[code];
        localStorage.setItem("myProxy", proxyData[code]);
        clearBtn.style.display = "block";
      } else {
        alert("Invalid secret code!");
      }
    }

    // Clear proxy
    function clearProxy() {
      proxyBox.value = "";
      localStorage.removeItem("myProxy");
      clearBtn.style.display = "none";
    }

    // Telegram click redirect
    telegramBtn.addEventListener("click", () => {
      window.open("https://t.me/cloudproxy_limited/", "_blank");
    });

    // Make Telegram draggable
    telegramBtn.onmousedown = function(event) {
      let shiftX = event.clientX - telegramBtn.getBoundingClientRect().left;
      let shiftY = event.clientY - telegramBtn.getBoundingClientRect().top;

      function moveAt(pageX, pageY) {
        telegramBtn.style.left = pageX - shiftX + 'px';
        telegramBtn.style.top = pageY - shiftY + 'px';
      }

      function onMouseMove(event) {
        telegramBtn.style.position = 'fixed';
        moveAt(event.pageX, event.pageY);
      }

      document.addEventListener('mousemove', onMouseMove);

      telegramBtn.onmouseup = function() {
        document.removeEventListener('mousemove', onMouseMove);
        telegramBtn.onmouseup = null;
      };
    };
    telegramBtn.ondragstart = () => false;
  </script>
</body>
</html>
